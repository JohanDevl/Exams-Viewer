(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{347:()=>{},4001:(e,s,t)=>{"use strict";t.d(s,{K:()=>i});var a=t(2115),n=t(2166),r=t(2940);function i(){let{settings:e}=(0,n.C$)(),{currentExam:s,currentQuestionIndex:t,setCurrentQuestion:i,goToNextQuestion:l,goToPreviousQuestion:c,submitAnswer:o,toggleFavorite:d,setQuestionDifficulty:x}=(0,r.s)();return(0,a.useEffect)(()=>{if(!e.keyboardShortcuts)return;let s=s=>{if(s.target instanceof HTMLInputElement||s.target instanceof HTMLTextAreaElement||s.target instanceof HTMLElement&&s.target.isContentEditable)return;let a=s.key.toLowerCase();if("arrowleft"===a||"a"===a){s.preventDefault(),c();return}if("arrowright"===a||"d"===a){s.preventDefault(),l();return}if("enter"===a||" "===a)return void s.preventDefault();if("f"===a){s.preventDefault(),d(t);return}if(e.showDifficulty){if("1"===a){s.preventDefault(),x(t,"easy");return}if("2"===a){s.preventDefault(),x(t,"medium");return}if("3"===a){s.preventDefault(),x(t,"hard");return}}"escape"===a&&s.preventDefault()};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s)}},[e.keyboardShortcuts,e.showDifficulty,t,s,i,l,c,o,d,x]),{shortcuts:[{key:"←/A",description:"Previous question"},{key:"→/D",description:"Next question"},{key:"F",description:"Toggle favorite"},...e.showDifficulty?[{key:"1",description:"Mark as easy"},{key:"2",description:"Mark as medium"},{key:"3",description:"Mark as hard"}]:[],{key:"Esc",description:"Close modal/Go back"}]}}},4725:(e,s,t)=>{"use strict";t.d(s,{ToastProvider:()=>f});var a=t(5155),n=t(2115),r=t(2166),i=t(646),l=t(4861),c=t(1243),o=t(1284),d=t(4416),x=t(9434);let m={success:i.A,error:l.A,warning:c.A,info:o.A},u={success:"bg-green-50 border-green-200 text-green-800 dark:bg-green-900/20 dark:border-green-800 dark:text-green-300",error:"bg-red-50 border-red-200 text-red-800 dark:bg-red-900/20 dark:border-red-800 dark:text-red-300",warning:"bg-yellow-50 border-yellow-200 text-yellow-800 dark:bg-yellow-900/20 dark:border-yellow-800 dark:text-yellow-300",info:"bg-blue-50 border-blue-200 text-blue-800 dark:bg-blue-900/20 dark:border-blue-800 dark:text-blue-300"};function h(e){let{type:s,title:t,description:r,duration:i,onClose:l}=e,[c,o]=(0,n.useState)(!1),[h,f]=(0,n.useState)(!1),p=m[s];(0,n.useEffect)(()=>{let e=setTimeout(()=>o(!0),50);return()=>clearTimeout(e)},[]),(0,n.useEffect)(()=>{if(i&&i>0){let e=setTimeout(()=>{g()},i);return()=>clearTimeout(e)}},[i]);let g=()=>{f(!0),setTimeout(()=>{l()},200)};return(0,a.jsx)("div",{className:(0,x.cn)("transform transition-all duration-200 ease-in-out will-change-transform","border rounded-lg shadow-lg p-3 sm:p-4 max-w-sm w-full",u[s],c&&!h?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),role:"alert","aria-live":"polite",style:{transform:c&&!h?"translate3d(0, 0, 0)":"translate3d(0, -100%, 0)",position:"relative",zIndex:1},children:(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)(p,{className:"h-5 w-5 flex-shrink-0 mt-0.5"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"font-medium text-sm",children:t}),r&&(0,a.jsx)("p",{className:"text-sm opacity-90 mt-1",children:r})]}),(0,a.jsx)("button",{onClick:g,className:"flex-shrink-0 p-1 rounded-md hover:bg-black/5 dark:hover:bg-white/5 transition-colors","aria-label":"Close notification",children:(0,a.jsx)(d.A,{className:"h-4 w-4"})})]})})}function f(){let{toasts:e,removeToast:s}=(0,r.C$)(),[t,i]=(0,n.useState)(!1);return(0,n.useEffect)(()=>{let e=()=>{i(window.innerWidth<=768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,a.jsx)("div",{className:"fixed z-50 flex flex-col gap-2 max-w-sm transition-all duration-200 ".concat(t?"top-2 left-2 right-2 max-w-none":"top-4 right-4"),children:e.map(e=>(0,a.jsx)(h,{...e,onClose:()=>s(e.id)},e.id))})}},4808:(e,s,t)=>{"use strict";t.d(s,{ThemeInitializer:()=>r});var a=t(2115),n=t(2166);function r(){let{applyTheme:e,applyDefaultSidebarPosition:s,settings:t}=(0,n.C$)();return(0,a.useEffect)(()=>{if(e(),s(),"system"===t.theme){let s=window.matchMedia("(prefers-color-scheme: dark)"),t=()=>e();return s.addEventListener("change",t),()=>s.removeEventListener("change",t)}},[t.theme,t.defaultSidebarPosition,e,s]),null}},7832:(e,s,t)=>{"use strict";t.d(s,{KeyboardShortcutsProvider:()=>n});var a=t(4001);function n(){return(0,a.K)(),null}},9545:(e,s,t)=>{"use strict";t.d(s,{ModalsProvider:()=>eP});var a=t(5155),n=t(1976),r=t(8564),i=t(4186),l=t(3786),c=t(2115),o=t(5452),d=t(4416),x=t(9434);function m(e){let{...s}=e;return(0,a.jsx)(o.bL,{"data-slot":"dialog",...s})}function u(e){let{...s}=e;return(0,a.jsx)(o.ZL,{"data-slot":"dialog-portal",...s})}function h(e){let{className:s,...t}=e;return(0,a.jsx)(o.hJ,{"data-slot":"dialog-overlay",className:(0,x.cn)("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),...t})}function f(e){let{className:s,children:t,showCloseButton:n=!0,...r}=e;return(0,a.jsxs)(u,{"data-slot":"dialog-portal",children:[(0,a.jsx)(h,{}),(0,a.jsxs)(o.UC,{"data-slot":"dialog-content",className:(0,x.cn)("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",s),...r,children:[t,n&&(0,a.jsxs)(o.bm,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[(0,a.jsx)(d.A,{}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})}function p(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-header",className:(0,x.cn)("flex flex-col gap-2 text-center sm:text-left",s),...t})}function g(e){let{className:s,...t}=e;return(0,a.jsx)("div",{"data-slot":"dialog-footer",className:(0,x.cn)("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),...t})}function j(e){let{className:s,...t}=e;return(0,a.jsx)(o.hE,{"data-slot":"dialog-title",className:(0,x.cn)("text-lg leading-none font-semibold",s),...t})}function v(e){let{className:s,...t}=e;return(0,a.jsx)(o.VY,{"data-slot":"dialog-description",className:(0,x.cn)("text-muted-foreground text-sm",s),...t})}var b=t(285),w=t(6126),N=t(6424),y=t(2166),k=t(2940);function A(){let{isFavoritesModalOpen:e,closeFavoritesModal:s}=(0,y.C$)(),{currentExam:t,currentExamInfo:c,questionStates:o,setCurrentQuestion:d,getQuestionStatus:x}=(0,k.s)(),u=(null==t?void 0:t.questions.map((e,s)=>{var t,a,n;return{question:e,index:s,isFavorite:(null==(t=o[s])?void 0:t.isFavorite)||!1,status:x(s),difficulty:null==(a=o[s])?void 0:a.difficulty,notes:null==(n=o[s])?void 0:n.notes}}).filter(e=>e.isFavorite))||[];return(0,a.jsx)(m,{open:e,onOpenChange:s,children:(0,a.jsxs)(f,{className:"max-w-4xl max-h-[80vh]",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(j,{className:"flex items-center gap-2",children:[(0,a.jsx)(n.A,{className:"h-5 w-5 text-red-500"}),"Favorite Questions",c&&(0,a.jsx)(w.E,{variant:"outline",children:c.name})]}),(0,a.jsx)(v,{children:"View and manage your saved favorite questions"})]}),(0,a.jsx)("div",{className:"space-y-4",children:0===u.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(n.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No favorite questions"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Add questions to your favorites by clicking the heart icon"})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground",children:[u.length," favorite question",u.length>1?"s":""]})}),(0,a.jsx)(N.F,{className:"h-[400px] w-full",children:(0,a.jsx)("div",{className:"space-y-3",children:u.map(e=>{let{question:t,index:n,status:c,difficulty:o,notes:x}=e;return(0,a.jsx)("div",{className:"border border-border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:(0,a.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsxs)(w.E,{variant:"outline",className:"text-xs",children:["Question ",n+1]}),(0,a.jsx)(w.E,{className:(e=>{switch(e){case"correct":return"bg-green-100 text-green-800 border-green-200";case"incorrect":return"bg-red-100 text-red-800 border-red-200";case"answered":return"bg-blue-100 text-blue-800 border-blue-200";case"preview":return"bg-purple-100 text-purple-800 border-purple-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(c),children:(e=>{switch(e){case"correct":return"Correct";case"incorrect":return"Incorrect";case"answered":return"Answered";case"preview":return"Preview";default:return"Unanswered"}})(c)}),o&&(0,a.jsxs)(w.E,{className:(e=>{switch(e){case"easy":return"bg-green-100 text-green-800 border-green-200";case"medium":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"hard":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}})(o),children:[(0,a.jsx)(r.A,{className:"h-3 w-3 mr-1"}),o]})]}),(0,a.jsx)("p",{className:"text-sm mb-3 line-clamp-3",children:t.question}),x&&(0,a.jsxs)("div",{className:"mb-3 p-2 bg-muted rounded text-xs",children:[(0,a.jsx)(i.A,{className:"h-3 w-3 inline mr-1"}),(0,a.jsx)("strong",{children:"Note:"})," ",x]}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.answers.length," possible answer",t.answers.length>1?"s":""]})]}),(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{d(n),s()},className:"shrink-0",children:[(0,a.jsx)(l.A,{className:"h-4 w-4 mr-1"}),"View"]})]})},n)})})})]})})]})})}var C=t(9676),E=t(3109),S=t(9074),F=t(2525),D=t(2713),q=t(6785),P=t(9037),L=t(4944),_=t(6695);let O=(0,c.createContext)(null);function z(e){let{value:s,defaultValue:t,onValueChange:n,children:r,className:i}=e,[l,o]=c.useState(t||"");return(0,a.jsx)(O.Provider,{value:{value:void 0!==s?s:l,onValueChange:e=>{void 0===s&&o(e),null==n||n(e)}},children:(0,a.jsx)("div",{className:(0,x.cn)("space-y-4",i),children:r})})}function T(e){let{children:s,className:t}=e;return(0,a.jsx)("div",{className:(0,x.cn)("inline-flex items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),children:s})}function R(e){let{value:s,children:t,className:n}=e,r=(0,c.useContext)(O);if(!r)throw Error("TabsTrigger must be used within Tabs");let i=r.value===s;return(0,a.jsx)("button",{type:"button",onClick:()=>r.onValueChange(s),className:(0,x.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",i?"bg-background text-foreground shadow-sm":"hover:bg-muted/80",n),children:t})}function I(e){let{value:s,children:t,className:n}=e,r=(0,c.useContext)(O);if(!r)throw Error("TabsContent must be used within Tabs");return r.value!==s?null:(0,a.jsx)("div",{className:(0,x.cn)("ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),children:t})}var Z=t(5436);function U(){let{isStatisticsModalOpen:e,closeStatisticsModal:s}=(0,y.C$)(),{currentExam:t,currentExamInfo:l,questionStates:c,getProgress:o}=(0,k.s)(),{getSessionHistory:d}=(0,Z.useStatisticsStore)(),x=o(),u=x.answered>0?Math.round(x.correct/x.answered*100):0,h=x.total>0?Math.round(x.answered/x.total*100):0,g={easy:{total:0,correct:0,answered:0},medium:{total:0,correct:0,answered:0},hard:{total:0,correct:0,answered:0},unrated:{total:0,correct:0,answered:0}},A={correct:0,incorrect:0,unanswered:0,preview:0,favorites:0};Object.entries(c).forEach(e=>{let[s,t]=e,a=t.difficulty||"unrated";switch(a in g&&(g[a].total++,"unanswered"!==t.status&&(g[a].answered++,"correct"===t.status&&g[a].correct++)),t.status){case"correct":A.correct++;break;case"incorrect":A.incorrect++;break;case"preview":A.preview++;break;default:A.unanswered++}t.isFavorite&&A.favorites++});let O=e=>{let{title:s,value:t,subtitle:n,icon:r,color:i="text-muted-foreground"}=e;return(0,a.jsxs)(_.Zp,{className:"hover:shadow-md transition-all duration-200",children:[(0,a.jsxs)(_.aR,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[(0,a.jsx)(_.ZB,{className:"text-sm font-medium text-muted-foreground",children:s}),(0,a.jsx)(r,{className:"h-4 w-4 ".concat(i)})]}),(0,a.jsxs)(_.Wu,{children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-1",children:t}),n&&(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:n})]})]})},U=e=>{let{difficulty:s,data:t,color:n}=e,i=t.answered>0?Math.round(t.correct/t.answered*100):0;return(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-4 w-4 ".concat(n)}),(0,a.jsx)("span",{className:"text-sm font-medium capitalize",children:s})]}),(0,a.jsxs)(w.E,{variant:"outline",className:"text-xs",children:[t.correct,"/",t.answered," (",i,"%)"]})]}),(0,a.jsx)(L.k,{value:i,className:"h-2"}),(0,a.jsxs)("div",{className:"text-xs text-muted-foreground",children:[t.total," questions total"]})]})};return(0,a.jsx)(m,{open:e,onOpenChange:s,children:(0,a.jsxs)(f,{className:"max-w-6xl max-h-[80vh]",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(j,{className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-5 w-5 text-blue-500"}),"Performance Statistics",l&&(0,a.jsx)(w.E,{variant:"outline",children:l.name})]}),(0,a.jsx)(v,{children:"View detailed statistics and performance metrics for your exam progress"})]}),(0,a.jsx)(N.F,{className:"h-[600px] w-full",children:t?(0,a.jsxs)(z,{defaultValue:"current",className:"w-full",children:[(0,a.jsxs)(T,{className:"grid w-full grid-cols-2",children:[(0,a.jsxs)(R,{value:"current",className:"flex items-center gap-2",children:[(0,a.jsx)(D.A,{className:"h-4 w-4"}),"Current Session"]}),(0,a.jsxs)(R,{value:"history",className:"flex items-center gap-2",children:[(0,a.jsx)(C.A,{className:"h-4 w-4"}),"Session History"]})]}),(0,a.jsxs)(I,{value:"current",className:"space-y-6 mt-6",children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,a.jsx)(O,{title:"Progress",value:"".concat(h,"%"),subtitle:"".concat(x.answered,"/").concat(x.total," questions"),icon:E.A,color:"text-blue-500"}),(0,a.jsx)(O,{title:"Accuracy",value:"".concat(u,"%"),subtitle:"".concat(x.correct," correct answers"),icon:q.A,color:"text-green-500"}),(0,a.jsx)(O,{title:"Remaining",value:x.total-x.answered,subtitle:"Questions left",icon:i.A,color:"text-orange-500"}),(0,a.jsx)(O,{title:"Favorites",value:A.favorites,subtitle:"Saved questions",icon:n.A,color:"text-red-500"})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(P.A,{className:"h-5 w-5"}),"Overall Progress"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"General progress"}),(0,a.jsxs)("span",{children:[h,"%"]})]}),(0,a.jsx)(L.k,{value:h,className:"h-3"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,a.jsx)("span",{children:"Accuracy"}),(0,a.jsxs)("span",{children:[u,"%"]})]}),(0,a.jsx)(L.k,{value:u,className:"h-3"})]})]})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-5 w-5"}),"Performance by Difficulty"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsx)(U,{difficulty:"Easy",data:g.easy,color:"text-green-500"}),(0,a.jsx)(U,{difficulty:"Medium",data:g.medium,color:"text-yellow-500"}),(0,a.jsx)(U,{difficulty:"Hard",data:g.hard,color:"text-red-500"}),(0,a.jsx)(U,{difficulty:"Unrated",data:g.unrated,color:"text-gray-500"})]})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsx)(_.ZB,{children:"Answer Distribution"})}),(0,a.jsx)(_.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:A.correct}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Correct"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:A.incorrect}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Incorrect"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:A.preview}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Previewed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-gray-600",children:A.unanswered}),(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Unanswered"})]})]})})]}),l&&(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsx)(_.ZB,{children:"Exam Information"})}),(0,a.jsx)(_.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Exam code"}),(0,a.jsx)("div",{className:"text-lg",children:l.code})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Name"}),(0,a.jsx)("div",{className:"text-lg",children:l.name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Total questions"}),(0,a.jsx)("div",{className:"text-lg",children:l.questionCount})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("div",{className:"text-sm font-medium",children:"Last updated"}),(0,a.jsx)("div",{className:"text-lg",children:new Date(l.lastUpdated).toLocaleDateString("en-US")})]})]})})]})]}),(0,a.jsx)(I,{value:"history",className:"space-y-6 mt-6",children:(0,a.jsx)(e=>{let{examCode:s}=e,t=(0,Z.useStatisticsStore)(),n=t.getSessionHistory(s),r=t.getSessionHistory(),{clearSessionHistory:i}=(0,Z.useStatisticsStore)(),l=(()=>{if(n.length<2)return null;let e=n.slice(0,5),s=e.map(e=>e.accuracy),t=e.map(e=>e.completionPercentage);return{accuracy:{current:s[0]||0,previous:s[1]||0,trend:s.length>1?s[0]-s[1]:0},completion:{current:t[0]||0,previous:t[1]||0,trend:t.length>1?t[0]-t[1]:0}}})();return 0===n.length?(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(C.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No session history"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Complete some exam sessions to see your progress evolution"})]}):(0,a.jsxs)("div",{className:"space-y-6",children:[l&&(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(E.A,{className:"h-5 w-5"}),"Performance Evolution"]})}),(0,a.jsx)(_.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Accuracy Trend"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[l.accuracy.current.toFixed(1),"%"]}),(0,a.jsxs)("div",{className:"text-sm flex items-center justify-center gap-1 ".concat(l.accuracy.trend>=0?"text-green-600":"text-red-600"),children:[l.accuracy.trend>=0?"↗":"↘",Math.abs(l.accuracy.trend).toFixed(1),"% vs last session"]})]}),(0,a.jsxs)("div",{className:"text-center p-4 border rounded-lg",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground mb-1",children:"Completion Trend"}),(0,a.jsxs)("div",{className:"text-2xl font-bold",children:[l.completion.current.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"exam progress"}),(0,a.jsxs)("div",{className:"text-sm flex items-center justify-center gap-1 ".concat(l.completion.trend>=0?"text-green-600":"text-red-600"),children:[l.completion.trend>=0?"↗":"↘",Math.abs(l.completion.trend).toFixed(1),"% vs last session"]})]})]})})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2",children:[(0,a.jsx)(S.A,{className:"h-5 w-5"}),"Session History (",n.length," sessions)"]}),n.length>0&&(0,a.jsxs)(b.$,{variant:"outline",size:"sm",onClick:()=>{let e=s?"Clear session history for ".concat(s,"? (keeps latest session only)"):"Clear session history for all exams? (keeps latest session for each exam)";window.confirm(e)&&i(s)},className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[(0,a.jsx)(F.A,{className:"h-4 w-4 mr-2"}),"Clear Old Sessions"]})]})}),(0,a.jsx)(_.Wu,{children:(0,a.jsx)("div",{className:"space-y-3",children:n.map((e,s)=>(0,a.jsxs)("div",{className:"p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"font-medium flex items-center gap-2",children:[e.examName,!e.endTime&&(0,a.jsx)(w.E,{variant:"secondary",className:"text-xs",children:"En cours"})]}),(0,a.jsxs)("div",{className:"text-sm text-muted-foreground",children:["Started: ",new Date(e.startTime).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),(0,a.jsx)(w.E,{variant:0===s?"default":"outline",children:0===s?"Latest":"#".concat(s+1)})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-blue-600",children:[e.completionPercentage.toFixed(0),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Completion"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-lg font-semibold text-green-600",children:[e.accuracy.toFixed(1),"%"]}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Accuracy"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg font-semibold text-purple-600",children:e.questionsAnswered}),(0,a.jsx)("div",{className:"text-xs text-muted-foreground",children:"Questions"})]})]}),Object.keys(e.difficultyBreakdown).length>0&&(0,a.jsxs)("div",{className:"mt-3 pt-3 border-t",children:[(0,a.jsx)("div",{className:"text-xs text-muted-foreground mb-2",children:"Difficulty Performance"}),(0,a.jsx)("div",{className:"flex gap-2 flex-wrap",children:Object.entries(e.difficultyBreakdown).map(e=>{let[s,t]=e;return(0,a.jsxs)(w.E,{variant:"outline",className:"text-xs",children:[s,": ",t.correct,"/",t.answered]},s)})})]})]},e.id))})})]}),s&&r.length>n.length&&(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsx)(_.ZB,{children:"Overall Progress Across All Exams"})}),(0,a.jsx)(_.Wu,{children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-2xl font-bold mb-2",children:r.length}),(0,a.jsx)("div",{className:"text-muted-foreground",children:"Total sessions completed"}),(0,a.jsxs)("div",{className:"mt-4 text-sm text-muted-foreground",children:["Average accuracy: ",(r.reduce((e,s)=>e+s.accuracy,0)/r.length).toFixed(1),"%"]})]})})]})]})},{examCode:null==l?void 0:l.code})})]}):(0,a.jsxs)("div",{className:"text-center py-12",children:[(0,a.jsx)(D.A,{className:"mx-auto h-12 w-12 text-muted-foreground mb-4"}),(0,a.jsx)("h3",{className:"text-lg font-medium mb-2",children:"No exam loaded"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Load an exam to view your statistics"})]})})]})})}var Q=t(381),B=t(3127),M=t(5968),H=t(4653),V=t(2657),W=t(2432),$=t(5742),Y=t(1366),K=t(5133),J=t(5273),G=t(133),X=t(968);let ee=(0,t(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),es=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(X.b,{ref:s,className:(0,x.cn)(ee(),t),...n})});es.displayName=X.b.displayName;var et=t(4884);let ea=c.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)(et.bL,{className:(0,x.cn)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...n,ref:s,children:(0,a.jsx)(et.zi,{className:(0,x.cn)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})})});ea.displayName=et.bL.displayName;var en=t(4338),er=t(6474),ei=t(5196),el=t(7863);function ec(e){let{...s}=e;return(0,a.jsx)(en.bL,{"data-slot":"select",...s})}function eo(e){let{...s}=e;return(0,a.jsx)(en.WT,{"data-slot":"select-value",...s})}function ed(e){let{className:s,size:t="default",children:n,...r}=e;return(0,a.jsxs)(en.l9,{"data-slot":"select-trigger","data-size":t,className:(0,x.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),...r,children:[n,(0,a.jsx)(en.In,{asChild:!0,children:(0,a.jsx)(er.A,{className:"size-4 opacity-50"})})]})}function ex(e){let{className:s,children:t,position:n="popper",...r}=e;return(0,a.jsx)(en.ZL,{children:(0,a.jsxs)(en.UC,{"data-slot":"select-content",className:(0,x.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===n&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:n,...r,children:[(0,a.jsx)(eu,{}),(0,a.jsx)(en.LM,{className:(0,x.cn)("p-1","popper"===n&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),(0,a.jsx)(eh,{})]})})}function em(e){let{className:s,children:t,...n}=e;return(0,a.jsxs)(en.q7,{"data-slot":"select-item",className:(0,x.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",s),...n,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(en.VF,{children:(0,a.jsx)(ei.A,{className:"size-4"})})}),(0,a.jsx)(en.p4,{children:t})]})}function eu(e){let{className:s,...t}=e;return(0,a.jsx)(en.PP,{"data-slot":"select-scroll-up-button",className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(el.A,{className:"size-4"})})}function eh(e){let{className:s,...t}=e;return(0,a.jsx)(en.wn,{"data-slot":"select-scroll-down-button",className:(0,x.cn)("flex cursor-default items-center justify-center py-1",s),...t,children:(0,a.jsx)(er.A,{className:"size-4"})})}var ef=t(7489);let ep=c.forwardRef((e,s)=>{let{className:t,orientation:n="horizontal",decorative:r=!0,...i}=e;return(0,a.jsx)(ef.b,{ref:s,decorative:r,orientation:n,className:(0,x.cn)("shrink-0 bg-border","horizontal"===n?"h-[1px] w-full":"h-full w-[1px]",t),...i})});ep.displayName=ef.b.displayName;var eg=t(9166),ej=t(4001);function ev(){let{isSettingsModalOpen:e,closeSettingsModal:s,settings:t,updateSettings:n,resetSettings:i}=(0,y.C$)(),{shortcuts:l}=(0,ej.K)(),c=(e,s)=>{n({[e]:s})};return(0,a.jsx)(eg.Y,{children:(0,a.jsx)(m,{open:e,onOpenChange:s,children:(0,a.jsxs)(f,{className:"max-w-2xl max-h-[80vh]",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(j,{className:"flex items-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-5 w-5 text-gray-500"}),"Application Settings"]}),(0,a.jsx)(v,{children:"Customize your application preferences and behavior"})]}),(0,a.jsx)(N.F,{className:"h-[500px] w-full pr-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(B.A,{className:"h-4 w-4"}),"Appearance"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(es,{htmlFor:"theme",children:"Theme"}),(0,a.jsxs)(ec,{value:t.theme,onValueChange:e=>c("theme",e),children:[(0,a.jsx)(ed,{children:(0,a.jsx)(eo,{})}),(0,a.jsxs)(ex,{children:[(0,a.jsx)(em,{value:"light",children:"Light"}),(0,a.jsx)(em,{value:"dark",children:"Dark"}),(0,a.jsx)(em,{value:"system",children:"System"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"System theme automatically adapts to your system preferences"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(es,{htmlFor:"defaultView",children:"Default view"}),(0,a.jsxs)(ec,{value:t.defaultView,onValueChange:e=>c("defaultView",e),children:[(0,a.jsx)(ed,{children:(0,a.jsx)(eo,{})}),(0,a.jsxs)(ex,{children:[(0,a.jsx)(em,{value:"list",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(M.A,{className:"h-4 w-4"}),"List"]})}),(0,a.jsx)(em,{value:"card",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(H.A,{className:"h-4 w-4"}),"Cards"]})})]})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(es,{htmlFor:"defaultSidebarPosition",children:"Default sidebar position"}),(0,a.jsxs)(ec,{value:window.innerWidth<768&&"collapsed"===t.defaultSidebarPosition?"expanded":t.defaultSidebarPosition,onValueChange:e=>c("defaultSidebarPosition",e),children:[(0,a.jsx)(ed,{children:(0,a.jsx)(eo,{})}),(0,a.jsxs)(ex,{children:[(0,a.jsx)(em,{value:"hidden",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(V.A,{className:"h-4 w-4 opacity-50"}),"Hidden"]})}),(0,a.jsx)(em,{value:"collapsed",className:"hidden md:flex",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(W.A,{className:"h-4 w-4"}),"Collapsed"]})}),(0,a.jsx)(em,{value:"expanded",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)($.A,{className:"h-4 w-4"}),"Expanded"]})})]})]}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["Choose the default sidebar position when the app loads",(0,a.jsx)("span",{className:"md:hidden block mt-1",children:"Note: Collapsed mode is not available on mobile devices"})]})]})]})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(V.A,{className:"h-4 w-4"}),"Display"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"showExplanations",children:"Show answers"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automatically shows answers after an answer"})]}),(0,a.jsx)(ea,{id:"showExplanations",checked:t.showExplanations,onCheckedChange:e=>c("showExplanations",e)})]}),(0,a.jsx)(ep,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"showDifficulty",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(r.A,{className:"h-4 w-4"}),"Show difficulty"]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Displays difficulty indicators for questions"})]}),(0,a.jsx)(ea,{id:"showDifficulty",checked:t.showDifficulty,onCheckedChange:e=>c("showDifficulty",e)})]}),(0,a.jsx)(ep,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"showComments",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(Y.A,{className:"h-4 w-4"}),"Show comments"]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Displays community comments for questions"})]}),(0,a.jsx)(ea,{id:"showComments",checked:t.showComments,onCheckedChange:e=>c("showComments",e)})]})]})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)($.A,{className:"h-4 w-4"}),"Navigation"]})}),(0,a.jsxs)(_.Wu,{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"autoProgress",children:"Auto progress"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Automatically moves to the next question after an answer"})]}),(0,a.jsx)(ea,{id:"autoProgress",checked:t.autoProgress,onCheckedChange:e=>c("autoProgress",e)})]}),(0,a.jsx)(ep,{}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"keyboardShortcuts",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(K.A,{className:"h-4 w-4"}),"Keyboard shortcuts"]})}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Enables keyboard shortcuts for quick navigation"})]}),(0,a.jsx)(ea,{id:"keyboardShortcuts",checked:t.keyboardShortcuts,onCheckedChange:e=>c("keyboardShortcuts",e)})]})]})]}),(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(J.A,{className:"h-4 w-4"}),"Audio and Feedback"]})}),(0,a.jsx)(_.Wu,{className:"space-y-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"soundEffects",children:"Sound effects"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Plays sounds during interactions (correct/incorrect answers)"})]}),(0,a.jsx)(ea,{id:"soundEffects",checked:t.soundEffects,onCheckedChange:e=>c("soundEffects",e)})]})})]}),t.keyboardShortcuts&&(0,a.jsxs)(_.Zp,{children:[(0,a.jsx)(_.aR,{children:(0,a.jsxs)(_.ZB,{className:"flex items-center gap-2 text-base",children:[(0,a.jsx)(K.A,{className:"h-4 w-4"}),"Available Keyboard Shortcuts"]})}),(0,a.jsx)(_.Wu,{children:(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3 text-sm",children:l.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{children:e.description}),(0,a.jsx)("code",{className:"bg-muted px-1 rounded",children:e.key})]},s))})})]})]})}),(0,a.jsxs)(g,{className:"flex justify-between",children:[(0,a.jsxs)(b.$,{variant:"outline",onClick:()=>{i()},className:"flex items-center gap-2",children:[(0,a.jsx)(G.A,{className:"h-4 w-4"}),"Reset"]}),(0,a.jsx)(b.$,{onClick:s,children:"Close"})]})]})})})}var eb=t(7434),ew=t(8587),eN=t(4209),ey=t(4261),ek=t(646),eA=t(1497),eC=t(1788),eE=t(6932),eS=t(1284);class eF{static cleanHtml(e){return e.replace(/<[^>]*>/g,"").replace(/&nbsp;/g," ").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&").replace(/&quot;/g,'"').trim()}static processLinksForPDF(e){let s=e.replace(/<a[^>]*href=["']([^"']*)["'][^>]*>([^<]*)<\/a>/gi,'<a href="$1" target="_blank" style="color: #007bff; text-decoration: underline;">$2</a>');return s=s.replace(/(https?:\/\/[^\s<>"]{2,})/gi,e=>{let t=s.substring(0,s.indexOf(e));return t.lastIndexOf("<a")>t.lastIndexOf("</a>")?e:'<a href="'.concat(e,'" target="_blank" style="color: #007bff; text-decoration: underline;">').concat(e,"</a>")})}static filterQuestions(e,s,t){let a={questions:[],indices:[]};return e.forEach((e,n)=>{let r=s[n],i=!1;switch(t){case"all":default:i=!0;break;case"favorites":i=(null==r?void 0:r.isFavorite)||!1;break;case"answered":i=!!(null==r?void 0:r.userAnswer);break;case"notes":i=!!(null==r?void 0:r.notes)}i&&(a.questions.push(e),a.indices.push(n))}),a}static async exportAsJSON(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",{questions:t,questionStates:a,examInfo:n,options:r}=e,{questions:i,indices:l}=this.filterQuestions(t,a,s),c=new Blob([JSON.stringify({metadata:{exportDate:new Date().toISOString(),examInfo:n,totalQuestions:i.length,exportOptions:r},questions:i.map((e,s)=>{let t=l[s],n=a[t],i={questionNumber:e.question_number||(t+1).toString(),question:r.includeAnswers?e.question:this.cleanHtml(e.question)};return r.includeAnswers&&(i.answers=e.answers,i.correctAnswers=e.correct_answers||(e.correct_answer?[e.correct_answer]:[]),i.mostVoted=e.most_voted||""),r.includeExplanations&&e.explanation&&(i.explanation=e.explanation),r.includeStatistics&&e.comments&&(i.comments=e.comments),n&&(i.userState={isFavorite:n.isFavorite,difficulty:n.difficulty,userAnswer:n.userAnswer,notes:n.notes}),i})},null,2)],{type:"application/json"}),o=URL.createObjectURL(c),d=document.createElement("a");d.href=o,d.download="".concat((null==n?void 0:n.code)||"exam","-export.json"),document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(o)}static async exportAsCSV(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",{questions:t,questionStates:a,examInfo:n,options:r}=e,{questions:i,indices:l}=this.filterQuestions(t,a,s),c=[["Question Number","Question",...r.includeAnswers?["Answer A","Answer B","Answer C","Answer D","Correct Answer"]:[],...r.includeExplanations?["Explanation"]:[],...r.includeStatistics?["Comments Count"]:[],"Is Favorite","Difficulty","User Answer","Notes"].join(",")];i.forEach((e,s)=>{var t,n;let i=l[s],o=a[i],d=['"'.concat(e.question_number||(i+1).toString(),'"'),'"'.concat(this.cleanHtml(e.question).replace(/"/g,'""'),'"')];if(r.includeAnswers){for(let s=0;s<4;s++)d.push('"'.concat(e.answers[s]?this.cleanHtml(e.answers[s]).replace(/"/g,'""'):"",'"'));let s=(null==(n=e.correct_answers)?void 0:n.join(", "))||e.correct_answer||e.most_voted||"";d.push('"'.concat(s,'"'))}r.includeExplanations&&d.push('"'.concat(e.explanation?this.cleanHtml(e.explanation).replace(/"/g,'""'):"",'"')),r.includeStatistics&&d.push('"'.concat(e.comments?e.comments.length:0,'"')),d.push('"'.concat((null==o?void 0:o.isFavorite)?"Yes":"No",'"')),d.push('"'.concat((null==o?void 0:o.difficulty)||"",'"')),d.push('"'.concat((null==o||null==(t=o.userAnswer)?void 0:t.selectedAnswers.join(", "))||"",'"')),d.push('"'.concat((null==o?void 0:o.notes)||"",'"')),c.push(d.join(","))});let o=new Blob([c.join("\n")],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(o),x=document.createElement("a");x.href=d,x.download="".concat((null==n?void 0:n.code)||"exam","-export.csv"),document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(d)}static async exportAsText(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",{questions:t,questionStates:a,examInfo:n,options:r}=e,{questions:i,indices:l}=this.filterQuestions(t,a,s),c="";n&&(c+="".concat(n.name," (").concat(n.code,")\n"),c+="Export Date: ".concat(new Date().toLocaleDateString(),"\n"),c+="Total Questions: ".concat(i.length,"\n"),c+="".concat("=".repeat(60),"\n\n")),i.forEach((e,s)=>{let t=l[s],n=a[t],i=e.question_number||(t+1).toString();c+="Question ".concat(i,"\n"),c+="".concat("-".repeat(20),"\n"),c+="".concat(this.cleanHtml(e.question),"\n\n"),r.includeAnswers&&e.answers&&(e.answers.forEach((s,t)=>{var a,n;let r=String.fromCharCode(65+t),i=(null==(a=e.correct_answers)?void 0:a.includes(r))||e.correct_answer===r||(null==(n=e.most_voted)?void 0:n.includes(r));c+="".concat(r,". ").concat(this.cleanHtml(s)).concat(i?" ✓":"","\n")}),c+="\n"),r.includeExplanations&&e.explanation&&(c+="Explanation:\n".concat(this.cleanHtml(e.explanation),"\n\n")),n&&(n.isFavorite&&(c+="⭐ Favorite\n"),n.difficulty&&(c+="Difficulty: ".concat(n.difficulty,"\n")),n.userAnswer&&(c+="Your Answer: ".concat(n.userAnswer.selectedAnswers.join(", "),"\n")),n.notes&&(c+="Notes: ".concat(n.notes,"\n")),c+="\n"),r.includeStatistics&&e.comments&&e.comments.length>0&&(c+="Comments (".concat(e.comments.length,"):\n"),e.comments.forEach((e,s)=>{c+="".concat(s+1,". "),e.selected_answer&&(c+="Selected answer: ".concat(e.selected_answer,"\n    ")),c+="".concat(this.cleanHtml(e.content),"\n")}),c+="\n"),c+="".concat("=".repeat(60),"\n\n")});let o=new Blob([c],{type:"text/plain;charset=utf-8;"}),d=URL.createObjectURL(o),x=document.createElement("a");x.href=d,x.download="".concat((null==n?void 0:n.code)||"exam","-export.txt"),document.body.appendChild(x),x.click(),document.body.removeChild(x),URL.revokeObjectURL(d)}static async exportAsPDF(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",{questions:t,questionStates:a,examInfo:n,options:r}=e,{questions:i,indices:l}=this.filterQuestions(t,a,s),c='\n      <!DOCTYPE html>\n      <html>\n      <head>\n        <meta charset="utf-8">\n        <title>'.concat((null==n?void 0:n.name)||"Exam Export",'</title>\n        <style>\n          body { font-family: Arial, sans-serif; line-height: 1.6; margin: 40px; }\n          .header { text-align: center; border-bottom: 2px solid #333; padding-bottom: 20px; margin-bottom: 30px; }\n          .question { margin-bottom: 30px; page-break-inside: avoid; }\n          .question-number { font-weight: bold; font-size: 18px; color: #333; }\n          .question-text { margin: 10px 0; }\n          .answers { margin: 15px 0; }\n          .answer { margin: 5px 0; padding: 5px; }\n          .correct { background-color: #d4edda; border-left: 4px solid #28a745; }\n          .explanation { background-color: #f8f9fa; padding: 15px; border-left: 4px solid #007bff; margin: 10px 0; }\n          .user-info { background-color: #fff3cd; padding: 10px; border-left: 4px solid #ffc107; margin: 10px 0; }\n          .comments { background-color: #f8f9fa; padding: 10px; margin: 10px 0; }\n          a { color: #007bff; text-decoration: underline; }\n          a:hover { color: #0056b3; }\n          @media print { \n            body { margin: 20px; } \n            a { color: #007bff !important; text-decoration: underline !important; }\n          }\n        </style>\n      </head>\n      <body>\n        <div class="header">\n          <h1>').concat((null==n?void 0:n.name)||"Exam Export","</h1>\n          <p><strong>Code:</strong> ").concat((null==n?void 0:n.code)||"N/A"," | <strong>Questions:</strong> ").concat(i.length," | <strong>Export Date:</strong> ").concat(new Date().toLocaleDateString(),"</p>\n        </div>\n    ");i.forEach((e,s)=>{let t=l[s],n=a[t],i=e.question_number||(t+1).toString();c+='\n        <div class="question">\n          <div class="question-number">Question '.concat(i,'</div>\n          <div class="question-text">').concat(this.processLinksForPDF(e.question),"</div>\n      "),r.includeAnswers&&e.answers&&(c+='<div class="answers">',e.answers.forEach((s,t)=>{var a,n;let r=String.fromCharCode(65+t),i=(null==(a=e.correct_answers)?void 0:a.includes(r))||e.correct_answer===r||(null==(n=e.most_voted)?void 0:n.includes(r));c+='<div class="answer '.concat(i?"correct":"",'">').concat(r,". ").concat(this.processLinksForPDF(s),"</div>")}),c+="</div>"),r.includeExplanations&&e.explanation&&(c+='<div class="explanation"><strong>Explanation:</strong><br>'.concat(this.processLinksForPDF(e.explanation),"</div>")),n&&(n.isFavorite||n.difficulty||n.userAnswer||n.notes)&&(c+='<div class="user-info">',n.isFavorite&&(c+="<span>⭐ Favorite</span><br>"),n.difficulty&&(c+="<strong>Difficulty:</strong> ".concat(n.difficulty,"<br>")),n.userAnswer&&(c+="<strong>Your Answer:</strong> ".concat(n.userAnswer.selectedAnswers.join(", "),"<br>")),n.notes&&(c+="<strong>Notes:</strong> ".concat(this.processLinksForPDF(n.notes),"<br>")),c+="</div>"),r.includeStatistics&&e.comments&&e.comments.length>0&&(c+='<div class="comments"><strong>Comments ('.concat(e.comments.length,"):</strong><br>"),e.comments.slice(0,5).forEach((e,s)=>{c+='<div style="margin-bottom: 10px;">'.concat(s+1,". "),e.selected_answer&&(c+="<strong>Selected answer: ".concat(e.selected_answer,"</strong><br>")),c+="".concat(this.processLinksForPDF(e.content),"</div>")}),c+="</div>"),c+="</div>"}),c+="</body></html>";let o=window.open("","_blank");o&&(o.document.write(c),o.document.close(),o.onload=()=>{setTimeout(()=>{o.print()},500)})}static async exportData(e,s,t){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"all",n=arguments.length>4?arguments[4]:void 0,r={questions:e.questions,questionStates:s,examInfo:n?{...n,totalQuestions:e.questions.length,exportDate:new Date().toISOString()}:void 0,options:t};switch(t.format){case"json":await this.exportAsJSON(r,a);break;case"csv":await this.exportAsCSV(r,a);break;case"txt":await this.exportAsText(r,a);break;case"pdf":await this.exportAsPDF(r,a);break;default:throw Error("Unsupported export format: ".concat(t.format))}}}let eD=[{format:"pdf",label:"PDF Document",icon:eb.A,description:"Formatted document with questions and answers"},{format:"json",label:"JSON Data",icon:ew.A,description:"Structured data format for developers"},{format:"txt",label:"Plain Text",icon:eN.A,description:"Simple text file format"},{format:"csv",label:"CSV Spreadsheet",icon:ey.A,description:"Tabular format for analysis"}];function eq(){let{isExportModalOpen:e,closeExportModal:s,addToast:t}=(0,y.C$)(),{currentExam:n,questionStates:i}=(0,k.s)(),[l,o]=(0,c.useState)({format:"pdf",includeAnswers:!0,includeExplanations:!0,includeStatistics:!0,filterByStatus:void 0,filterByDifficulty:void 0}),[d,u]=(0,c.useState)("all"),[h,A]=(0,c.useState)(!0),[C,E]=(0,c.useState)(!0),[S,F]=(0,c.useState)(!0),D=(e,s)=>{o(t=>({...t,[e]:s}))},q=()=>{if(!n)return 0;let e=n.questions.length;return"favorites"===d?e=Object.values(i).filter(e=>null==e?void 0:e.isFavorite).length:"answered"===d&&(e=Object.values(i).filter(e=>null==e?void 0:e.userAnswer).length),e},P=async()=>{if(n)try{var e;t({type:"info",title:"Exporting...",description:"Preparing ".concat(l.format.toUpperCase()," file with ").concat(q()," questions"),duration:2e3});let a={name:"ServiceNow Certification Exam",code:(null==(e=n.questions[0])?void 0:e.question_number)?"EXAM":"PRACTICE"};await eF.exportData(n,i,l,d,a),t({type:"success",title:"Export completed!",description:"Successfully exported ".concat(q()," questions as ").concat(l.format.toUpperCase()),duration:4e3}),s()}catch(e){console.error("Export failed:",e),t({type:"error",title:"Export failed",description:"There was an error while exporting the data. Please try again.",duration:5e3})}};return(0,a.jsx)(eg.Y,{children:(0,a.jsx)(m,{open:e,onOpenChange:s,children:(0,a.jsxs)(f,{className:"max-w-3xl max-h-[85vh]",children:[(0,a.jsxs)(p,{children:[(0,a.jsxs)(j,{className:"flex items-center gap-2",children:[(0,a.jsx)(eC.A,{className:"h-5 w-5 text-gray-500"}),"Export Options"]}),(0,a.jsx)(v,{children:"Choose your export format and content options"})]}),(0,a.jsx)(N.F,{className:"max-h-[60vh] w-full pr-4",children:(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eb.A,{className:"h-4 w-4"}),"Export Format"]}),(0,a.jsx)("div",{className:"grid grid-cols-2 gap-3",children:eD.map(e=>{let s=e.icon,t=l.format===e.format;return(0,a.jsx)("button",{className:(0,x.cn)("p-4 border rounded-xl cursor-pointer transition-all text-left group hover:border-primary/50",t?"border-primary bg-primary/10 ring-1 ring-primary/20":"border-border hover:bg-muted/50"),onClick:()=>{var s;return s=e.format,void o(e=>({...e,format:s}))},children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-10 h-10 rounded-lg flex items-center justify-center transition-colors",t?"bg-primary text-primary-foreground":"bg-muted group-hover:bg-muted"),children:(0,a.jsx)(s,{className:"h-5 w-5"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label}),t&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:e.description})]})]})},e.format)})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(eE.A,{className:"h-4 w-4"}),"Content Filter"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-3",children:[{key:"all",label:"All Questions",icon:M.A,description:"Export all available questions"},{key:"favorites",label:"Favorites Only",icon:r.A,description:"Only export favorited questions"},{key:"answered",label:"Answered Questions",icon:ek.A,description:"Questions you have answered"}].map(e=>{let s=e.icon,t=d===e.key;return(0,a.jsx)("button",{className:(0,x.cn)("p-3 border rounded-lg cursor-pointer transition-all text-left group hover:border-primary/50",t?"border-primary bg-primary/10 ring-1 ring-primary/20":"border-border hover:bg-muted/50"),onClick:()=>D(e.key,!l[e.key]),children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:(0,x.cn)("w-8 h-8 rounded-lg flex items-center justify-center transition-colors",t?"bg-primary text-primary-foreground":"bg-muted group-hover:bg-muted"),children:(0,a.jsx)(s,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("span",{className:"font-medium text-sm",children:e.label}),t&&(0,a.jsx)("div",{className:"w-2 h-2 rounded-full bg-primary"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5 leading-tight",children:e.description})]})]})},e.key)})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("h3",{className:"text-sm font-medium flex items-center gap-2",children:[(0,a.jsx)(Q.A,{className:"h-4 w-4"}),"Content Options"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 gap-4 p-4 border rounded-lg bg-muted/20",children:(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeQuestions",className:"text-sm font-medium",children:"Include Questions"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include the question text"})]}),(0,a.jsx)(ea,{id:"includeQuestions",checked:h,onCheckedChange:A})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeAnswers",className:"text-sm font-medium",children:"Include Answers"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include answer choices"})]}),(0,a.jsx)(ea,{id:"includeAnswers",checked:l.includeAnswers,onCheckedChange:e=>D("includeAnswers",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeCorrect",className:"text-sm font-medium",children:"Include Correct Answers"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Mark correct answers"})]}),(0,a.jsx)(ea,{id:"includeCorrect",checked:l.includeExplanations,onCheckedChange:e=>D("includeExplanations",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeDiscussions",className:"text-sm font-medium",children:"Include Discussions"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include community comments"})]}),(0,a.jsx)(ea,{id:"includeDiscussions",checked:l.includeStatistics,onCheckedChange:e=>D("includeStatistics",e)})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeImages",className:"text-sm font-medium",children:"Include Images"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include question images"})]}),(0,a.jsx)(ea,{id:"includeImages",checked:C,onCheckedChange:E})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between py-2",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(es,{htmlFor:"includeMetadata",className:"text-sm font-medium",children:"Include Metadata"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Include question metadata"})]}),(0,a.jsx)(ea,{id:"includeMetadata",checked:S,onCheckedChange:F})]})]})})]}),(0,a.jsx)("div",{className:"p-4 bg-muted/30 rounded-lg border",children:(0,a.jsx)("div",{className:"flex items-center justify-between",children:(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg bg-primary/10 flex items-center justify-center",children:(0,a.jsx)(eS.A,{className:"h-5 w-5 text-primary"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm font-medium",children:["Ready to export as ",l.format.toUpperCase()]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsxs)(w.E,{variant:"secondary",className:"text-xs",children:[q()," questions"]}),(0,a.jsx)("span",{className:"text-xs text-muted-foreground",children:(()=>{let e=q(),s=1;l.includeAnswers&&(s+=.3),l.includeExplanations&&(s+=.2),l.includeStatistics&&(s+=.4),C&&(s+=2);let t=(.07*e*s).toFixed(1);return"~".concat(t," MB")})()})]})]})]})})})]})}),(0,a.jsxs)(g,{className:"flex justify-between",children:[(0,a.jsx)(b.$,{variant:"outline",onClick:s,children:"Cancel"}),(0,a.jsxs)(b.$,{onClick:P,disabled:!n||0===q(),className:"flex items-center gap-2",children:[(0,a.jsx)(eC.A,{className:"h-4 w-4"}),"Export ",l.format.toUpperCase()]})]})]})})})}function eP(){return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(A,{}),(0,a.jsx)(U,{}),(0,a.jsx)(ev,{}),(0,a.jsx)(eq,{})]})}ek.A,ek.A,eA.A},9902:(e,s,t)=>{Promise.resolve().then(t.t.bind(t,6196,23)),Promise.resolve().then(t.t.bind(t,347,23)),Promise.resolve().then(t.bind(t,7832)),Promise.resolve().then(t.bind(t,9545)),Promise.resolve().then(t.bind(t,4808)),Promise.resolve().then(t.bind(t,4725))}},e=>{e.O(0,[888,355,393,59,441,964,358],()=>e(e.s=9902)),_N_E=e.O()}]);